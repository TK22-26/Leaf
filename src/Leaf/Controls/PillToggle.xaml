<UserControl
    x:Class="Leaf.Controls.PillToggle"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:Leaf.Converters"
    Width="140"
    Height="32">
    <UserControl.Resources>
        <converters:HalfValueToCornerRadiusConverter x:Key="HalfValueToCornerRadiusConverter" />
    </UserControl.Resources>
    <ToggleButton
        x:Name="ToggleRoot"
        Width="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=UserControl}}"
        Height="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=UserControl}}"
        Padding="3"
        Background="{DynamicResource ControlFillColorDefaultBrush}"
        BorderThickness="1"
        BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
        Focusable="False"
        IsChecked="{Binding IsChecked, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}">
        <ToggleButton.Template>
            <ControlTemplate TargetType="ToggleButton">
                <Border
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="{Binding ActualHeight, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource HalfValueToCornerRadiusConverter}}">
                    <Grid x:Name="RootGrid" Margin="0" ClipToBounds="True">
                        <Border
                            x:Name="PillThumb"
                            Width="66"
                            Height="{Binding ActualHeight, ElementName=RootGrid}"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Background="{DynamicResource AccentFillColorDefaultBrush}"
                            CornerRadius="{Binding ActualHeight, RelativeSource={RelativeSource Self}, Converter={StaticResource HalfValueToCornerRadiusConverter}}"
                            RenderTransformOrigin="0.5,0.5">
                            <Border.RenderTransform>
                                <TranslateTransform x:Name="PillTransform" X="0" />
                            </Border.RenderTransform>
                        </Border>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock
                                x:Name="LeftLabel"
                                Grid.Column="0"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontSize="{Binding LabelFontSize, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                FontWeight="SemiBold"
                                Foreground="{DynamicResource TextFillColorInverseBrush}"
                                Text="{Binding LeftText, RelativeSource={RelativeSource AncestorType=UserControl}, FallbackValue='Left'}"
                                IsHitTestVisible="False" />

                            <TextBlock
                                x:Name="RightLabel"
                                Grid.Column="1"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontSize="{Binding LabelFontSize, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                FontWeight="SemiBold"
                                Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                                Text="{Binding RightText, RelativeSource={RelativeSource AncestorType=UserControl}, FallbackValue='Right'}"
                                IsHitTestVisible="False" />
                        </Grid>
                    </Grid>
                </Border>
            </ControlTemplate>
        </ToggleButton.Template>
    </ToggleButton>
</UserControl>
