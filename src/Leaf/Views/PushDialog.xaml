<Window x:Class="Leaf.Views.PushDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ic="clr-namespace:FluentIcons.Wpf;assembly=FluentIcons.Wpf"
        Title="Push"
        Width="450"
        Height="400"
        MinWidth="350"
        MinHeight="300"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False"
        Background="{DynamicResource ApplicationBackgroundBrush}"
        ResizeMode="CanResize">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Content -->
        <ScrollViewer Grid.Row="0" Padding="24,20" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Header -->
                <StackPanel Margin="0,0,0,20">
                    <TextBlock Text="Push to Remote"
                               FontSize="20"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                        <TextBlock Text="Branch: "
                                   FontSize="13"
                                   Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                        <TextBlock x:Name="BranchNameText"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   FontFamily="Consolas"
                                   Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    </StackPanel>
                </StackPanel>

                <!-- Remote Selection -->
                <Border Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="16"
                        Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Select remotes to push to:"
                                   FontWeight="SemiBold"
                                   Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                                   Margin="0,0,0,12"/>

                        <!-- Remote List -->
                        <ItemsControl x:Name="RemotesList">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="Transparent"
                                            Padding="8,6"
                                            Margin="0,0,0,4"
                                            CornerRadius="4">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>

                                            <CheckBox IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                                      VerticalAlignment="Center"
                                                      Checked="RemoteCheckBox_Changed"
                                                      Unchecked="RemoteCheckBox_Changed"/>

                                            <StackPanel Grid.Column="1" Margin="8,0,0,0" VerticalAlignment="Center">
                                                <TextBlock Text="{Binding Name}"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                                                <TextBlock Text="{Binding DisplayUrl}"
                                                           FontSize="11"
                                                           Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                                                           TextTrimming="CharacterEllipsis"/>
                                            </StackPanel>

                                            <!-- Default indicator -->
                                            <Border Grid.Column="2"
                                                    Visibility="{Binding IsDefault, Converter={StaticResource BoolToVisibilityConverter}}"
                                                    Background="{DynamicResource AccentFillColorDefaultBrush}"
                                                    CornerRadius="4"
                                                    Padding="6,2"
                                                    VerticalAlignment="Center">
                                                <TextBlock Text="Default"
                                                           FontSize="10"
                                                           Foreground="White"/>
                                            </Border>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>

                <!-- Push to All Option -->
                <Border Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="16">
                    <CheckBox x:Name="PushToAllCheckBox"
                              Checked="PushToAllCheckBox_Changed"
                              Unchecked="PushToAllCheckBox_Changed"
                              Foreground="{DynamicResource TextFillColorPrimaryBrush}">
                        <StackPanel>
                            <TextBlock Text="Push to all remotes"
                                       FontWeight="SemiBold"/>
                            <TextBlock Text="Push the branch to every configured remote"
                                       FontSize="12"
                                       Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                    </CheckBox>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- Footer -->
        <Border Grid.Row="1"
                Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                BorderThickness="0,1,0,0"
                Padding="24,16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Content="Cancel"
                            Padding="20,10"
                            IsCancel="True"
                            Click="Cancel_Click"/>
                    <Button x:Name="PushButton"
                            Margin="12,0,0,0"
                            Padding="24,10"
                            Click="Push_Click"
                            IsEnabled="False"
                            Background="{DynamicResource AccentFillColorDefaultBrush}"
                            Foreground="White">
                        <StackPanel Orientation="Horizontal">
                            <ic:SymbolIcon Symbol="ArrowUpload" FontSize="14" Margin="0,0,8,0"/>
                            <TextBlock Text="Push"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Window.Resources>
</Window>
