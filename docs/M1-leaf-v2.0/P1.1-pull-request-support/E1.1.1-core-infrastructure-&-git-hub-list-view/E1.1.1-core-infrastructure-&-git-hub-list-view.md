---
title: Core Infrastructure & GitHub List/View
status: planned
owner: TBD
start_date: asap
duration: 4.5d
story_points: 21
depends_on: []
follows: []
---

# E1.1.1: Core Infrastructure & GitHub List/View

**Current State:** Leaf has no pull request support. Users must switch to GitHub/Azure DevOps web interface to view or manage PRs.

**Target State:** Foundation layer with data models, service interfaces, GitHub provider implementation, ViewModel, and basic UI panel showing PR list.

**Business Value:** Establishes the architectural foundation enabling all subsequent PR features. Users can immediately view and filter open PRs for GitHub repositories.
**Create:**
- `src/Leaf/Models/PullRequestInfo.cs` - Main PR model with ObservableObject base
- `src/Leaf/Models/PullRequestFileInfo.cs` - Changed file info with patch
- `src/Leaf/Models/PullRequestReviewInfo.cs` - Review with state mapping
- `src/Leaf/Models/PullRequestCommentInfo.cs` - Comment with thread support
- `src/Leaf/Models/PullRequestStatusCheckInfo.cs` - CI/CD check status
- `src/Leaf/Models/PullRequestMergeResult.cs` - Merge operation result
- `src/Leaf/Services/IPullRequestService.cs` - Provider-agnostic interface
- `src/Leaf/Services/PullRequestService.cs` - Router delegating to providers
- `src/Leaf/Services/GitHubPullRequestService.cs` - GitHub REST API implementation
- `src/Leaf/ViewModels/PullRequestViewModel.cs` - PR panel view model
- `src/Leaf/Controls/PullRequestPanel.xaml` - PR list/detail panel
- `src/Leaf/Controls/PullRequestPanel.xaml.cs` - Code-behind

**Modify:**
- `src/Leaf/ViewModels/MainViewModel.cs` - Add PR service, ViewModel, event handlers
- `src/Leaf/App.xaml.cs` - Register PR services with DI
- `src/Leaf/Views/MainWindow.xaml` - Add PullRequestPanel to layout
## Features

| Feature | Description | Story Points | Status |
|:--------|:------------|:-------------|:-------|
| [F1.1.1.1](F1.1.1.1-pr-data-models.md) | PR Data Models | 5 |  | Draft |
| [F1.1.1.2](F1.1.1.2-pr-service-interface-&-router.md) | PR Service Interface & Router | 3 |  | Draft |
| [F1.1.1.3](F1.1.1.3-git-hub-pr-service-implementation.md) | GitHub PR Service Implementation | 8 |  | Draft |
| [F1.1.1.4](F1.1.1.4-pr-view-model-&-main-view-model-integration.md) | PR ViewModel & MainViewModel Integration | 3 |  | Draft |
| [F1.1.1.5](F1.1.1.5-basic-pull-request-panel-ui.md) | Basic PullRequestPanel UI | 2 |  | Draft |

1. **F1.1.1.1 PR Data Models** - No dependencies, defines shared types
2. **F1.1.1.2 PR Service Interface & Router** - Depends on models
3. **F1.1.1.3 GitHub PR Service** - Depends on interface
4. **F1.1.1.4 PR ViewModel & MainViewModel** - Depends on services
5. **F1.1.1.5 Basic PullRequestPanel UI** - Depends on ViewModel
### Functional
- [ ] All 6 data models compile without errors
- [ ] IPullRequestService defines all required methods
- [ ] PullRequestService routes to correct provider based on remote URL
- [ ] GitHubPullRequestService fetches PR list with pagination
- [ ] GitHubPullRequestService handles authentication (OAuth + PAT)
- [ ] PullRequestPanel displays PR list with number, title, author, date
- [ ] PR list filters by status (Open, Closed, Merged, All)
- [ ] Selecting a PR updates detail view

### Quality
- [ ] Models follow CommitInfo.cs pattern (immutable data + observable selection)
- [ ] HttpClient injected (not created per-request) to avoid socket exhaustion
- [ ] async void event handlers wrapped in try/catch
- [ ] No compiler warnings
## Dependencies

**Depends on:** None
**Blocks:** None

## Proposed Improvements

<!-- Document opportunities for refactoring, scope adjustments, or better engineering practices here. Do not implement yet; just log them. When a proposed improvement affects work above this item's level, document it in the appropriate ancestor. -->

| ID | Description | Resolution |
|:---|:------------|:-----------|
