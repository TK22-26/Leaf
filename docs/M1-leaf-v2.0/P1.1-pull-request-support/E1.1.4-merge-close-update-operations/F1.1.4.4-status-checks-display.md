---
title: Status Checks Display
status: planned
owner: TBD
start_date: asap
duration: 0.5d
story_points: 3
depends_on: []
follows: []
---

# F1.1.4.4: Status Checks Display

**Description:**
Display CI/CD status checks in PR details using check-runs API with HeadSha from PullRequestInfo.

**Technical Approach:**

1. **GetPullRequestChecksAsync:**
   ```csharp
   // Use HeadSha from PullRequestInfo (avoids extra API call)
   var headSha = pr.HeadSha;  // Already have this from GetPullRequestAsync

   // GET /repos/{owner}/{repo}/commits/{headSha}/check-runs
   var response = await _httpClient.GetAsync(
       $"https://api.github.com/repos/{owner}/{repo}/commits/{headSha}/check-runs");

   // Parse response.check_runs array
   // Map: status="completed" + conclusion="success" ΓåÆ Success
   //      conclusion="failure" ΓåÆ Failure, etc.
   ```

2. **UI Display:**
   - Icon: Γ£ô (green), Γ£ù (red), ΓÅ│ (pending)
   - Check name and description
   - "View details" link to TargetUrl
   - Summary: "2/3 checks passed"

3. **Key Point:** HeadSha is already in PullRequestInfo - no extra API call to get it
## Business Value

- **User Impact:** CI/CD status visible at a glance; click through to check details in browser
- **Technical Value:** Uses HeadSha from PR data (no extra API call); maps all check states correctly

## Inputs & Outputs

| Name | Type | Nullable | Description |
|:-----|:-----|:---------|:------------|
|  |  |  |  |

**Returns:** void - No return value

## Edge Cases & Boundary Conditions

| ID | Condition | Expected Behavior |
|:---|:----------|:------------------|
| EC-1 | No status checks configured | Show "No checks" message |
| EC-2 | Check still in progress | Show pending icon, refresh periodically |
| EC-3 | Check without target URL | Omit "View details" link |
| EC-4 | Very long check name | Truncate with ellipsis, full name in tooltip |

## Acceptance Criteria

### Functional
- [ ] GetPullRequestChecksAsync uses HeadSha (no extra API call)
- [ ] Check-runs response parsed into PullRequestStatusCheckInfo
- [ ] Status displayed with icon: green checkmark/red X/yellow pending
- [ ] Check name and description visible
- [ ] "View details" link opens TargetUrl in browser
- [ ] Summary shows "X/Y checks passed"

### Quality
- [ ] Uses existing HeadSha from PullRequestInfo
- [ ] No compiler warnings

## Dependencies

| Type | ID/Name | Notes |
|:-----|:--------|:------|
| Depends On | None | |
| Blocks | None | |

## User Stories

### US-1: View CI/CD Status

**User Story:**
> As a developer, I want to see CI/CD check status in Leaf so that I know if the PR is ready to merge.

**Acceptance Criteria:**
1. Given a PR with passing checks, when I view details, then I see green checkmarks with check names
2. Given a PR with failing checks, when I view details, then I see red X icons with failure details
3. Given I click "View details" on a check, then the check URL opens in my browser

## Amendments

| Date | Category | Description | Rationale |
|:-----|:---------|:------------|:----------|

## Proposed Improvements

<!-- Document opportunities for refactoring, scope adjustments, or better engineering practices here. Do not implement yet; just log them. When a proposed improvement affects work above this item's level, document it in the appropriate ancestor. -->

| ID | Description | Resolution |
|:---|:------------|:-----------|
