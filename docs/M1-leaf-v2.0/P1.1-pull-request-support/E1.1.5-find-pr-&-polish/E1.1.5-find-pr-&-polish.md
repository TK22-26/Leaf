---
title: Find PR & Polish
status: planned
owner: TBD
start_date: asap
duration: 1.5d
story_points: 8
depends_on: []
follows: []
---

# E1.1.5: Find PR & Polish

**Current State:** Users cannot discover which PR a commit belongs to from the graph view.

**Target State:** "Find Pull Request..." context menu on commits that finds associated PRs, with fallback detection for squash-merged commits.

**Business Value:** Quickly trace commits back to their PR for context, code review history, and related discussion.
## Critical Files

**Modify:**
- src/Leaf/Services/GitHubPullRequestService.cs - Add FindPullRequestsForCommitAsync
- src/Leaf/Services/IPullRequestService.cs - Add FindPullRequestsForCommitAsync method
- src/Leaf/Controls/GitGraphView.xaml.cs - Add "Find Pull Request..." context menu item
- src/Leaf/ViewModels/MainViewModel.cs - Add FindPullRequestForCommitCommand

**Create:**
- (No new files - extends existing services and UI)

## Features

| Feature | Description | Story Points | Status |
|:--------|:------------|:-------------|:-------|
| [F1.1.5.1](F1.1.5.1-find-p-rs-for-commit.md) | Find PRs for Commit | 5 |  | Draft |
| [F1.1.5.2](F1.1.5.2-squash-merge-detection.md) | Squash-merge Detection | 3 |  | Draft |

## Implementation Order

1. **F1.1.5.1 Find PRs for Commit** - Core API and context menu
2. **F1.1.5.2 Squash-merge Detection** - Fallback when direct lookup returns empty

## Acceptance Criteria

### Functional
- [ ] "Find Pull Request..." menu item on commit context menu
- [ ] Uses groot-preview header for GitHub commits/{sha}/pulls endpoint
- [ ] Single PR found: opens PR panel with PR selected
- [ ] Multiple PRs found: opens PR panel with filtered list
- [ ] No PRs found: shows "No PRs found for {shortSha}" message
- [ ] Squash-merged commits: fallback searches commit message for (#123) pattern

### Quality
- [ ] Limited to 3 API calls for squash-merge detection
- [ ] All tests passing

## Dependencies

**Depends on:** None
**Blocks:** None

## Proposed Improvements

<!-- Document opportunities for refactoring, scope adjustments, or better engineering practices here. Do not implement yet; just log them. When a proposed improvement affects work above this item's level, document it in the appropriate ancestor. -->

| ID | Description | Resolution |
|:---|:------------|:-----------|
