---
title: Reviews & Comments Display
status: planned
owner: TBD
start_date: asap
duration: 0.5d
story_points: 3
depends_on: []
follows: []
---

# F1.1.2.3: Reviews & Comments Display

**Description:**
Display PR reviews (with approval status) and comments in the details panel, showing reviewer avatars, names, states, and comment bodies.

**Technical Approach:**

1. **Reviews Section:**
   ```xml
   <ItemsControl ItemsSource="{Binding SelectedPrReviews}">
       <ItemsControl.ItemTemplate>
           <DataTemplate>
               <StackPanel Orientation="Horizontal">
                   <Image Source="{Binding ReviewerAvatarUrl}" Width="24" />
                   <TextBlock Text="{Binding Reviewer}" />
                   <!-- State badge: green=Approved, red=ChangesRequested, gray=Commented -->
                   <Border Background="{Binding State, Converter={...}}" CornerRadius="3">
                       <TextBlock Text="{Binding State}" />
                   </Border>
               </StackPanel>
           </DataTemplate>
       </ItemsControl.ItemTemplate>
   </ItemsControl>
   ```

2. **State Badge Colors:**
   - Approved: #22863A (green)
   - ApprovedWithSuggestions: #28A745 (lighter green)
   - ChangesRequested: #CB2431 (red)
   - WaitingForAuthor: #E36209 (orange)
   - Commented: #6A737D (gray)
   - Pending: #6A737D (gray)
   - Dismissed: strikethrough

3. **Comments Section:**
   - Sort by date (oldest first)
   - Group by thread for Azure DevOps
   - Show resolved indicator for resolved threads
   - File-specific comments show file path context
## Business Value

- **User Impact:** Users see all review feedback and comments organized by reviewer, with clear approval/rejection states - immediate visibility into PR approval status
- **Technical Value:** Unified display of both review comments and issue comments; supports Azure DevOps threaded conversations; uses existing avatar caching

## Inputs & Outputs

| Name | Type | Nullable | Description |
|:-----|:-----|:---------|:------------|
|  |  |  |  |

**Returns:** void - No return value

## Edge Cases & Boundary Conditions

| ID | Condition | Expected Behavior |
|:---|:----------|:------------------|
| EC-1 | PR with no reviews | Show "No reviews yet" message |
| EC-2 | PR with no comments | Show "No comments" message |
| EC-3 | Reviewer with no avatar URL | Show default avatar placeholder |
| EC-4 | Dismissed review | Show with strikethrough styling |
| EC-5 | Azure DevOps resolved thread | Show resolved indicator, visually de-emphasized |

### Functional
- [ ] Reviews section shows reviewer, avatar, state badge, date
- [ ] State badges color-coded (green=approved, red=changes, gray=commented)
- [ ] Comments show author, date, body
- [ ] File-specific comments show file path context
- [ ] Resolved comments visually distinguished
- [ ] "No reviews yet" / "No comments" shown when empty

### Quality
- [ ] Reviews lazy-loaded when PR selected
- [ ] Avatars use existing AvatarService caching
- [ ] Long comments wrap correctly
## Dependencies

| Type | ID/Name | Notes |
|:-----|:--------|:------|
| Depends On | None | |
| Blocks | None | |

## User Stories

### US-1: View PR Reviews

**User Story:**
> As a PR author, I want to see all reviewer feedback at a glance so that I know what changes are required.

**Acceptance Criteria:**
1. Given a PR with reviews, when I view details, then I see each reviewer's name, avatar, and approval state
2. Given an approved review, when displayed, then the badge shows green "Approved" text
3. Given a review requesting changes, when displayed, then the badge shows red "Changes Requested" text

### US-2: View PR Comments

**User Story:**
> As a developer, I want to see all PR discussion so that I understand the review context.

**Acceptance Criteria:**
1. Given comments on a PR, when I view details, then comments display with author, date, and body
2. Given file-specific comments, when displayed, then the file path context is visible
3. Given an Azure DevOps resolved thread, when displayed, then it shows a "Resolved" indicator

## Amendments

| Date | Category | Description | Rationale |
|:-----|:---------|:------------|:----------|

## Proposed Improvements

<!-- Document opportunities for refactoring, scope adjustments, or better engineering practices here. Do not implement yet; just log them. When a proposed improvement affects work above this item's level, document it in the appropriate ancestor. -->

| ID | Description | Resolution |
|:---|:------------|:-----------|
