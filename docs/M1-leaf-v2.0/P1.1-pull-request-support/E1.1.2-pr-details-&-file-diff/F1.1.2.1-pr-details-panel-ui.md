---
title: PR Details Panel UI
status: planned
owner: TBD
start_date: asap
duration: 0.5d
story_points: 3
depends_on: []
follows: []
---

# F1.1.2.1: PR Details Panel UI

**Description:**
Expand PullRequestPanel right column with full PR details including title, author, branch badges (source ΓåÆ target), description, file list, commits, and action buttons.

**Technical Approach:**

1. **Details Panel Structure:**
   ```xml
   <ScrollViewer VerticalScrollBarVisibility="Auto">
       <StackPanel Margin="16" Visibility="{Binding HasSelectedPullRequest, ...}">
           <!-- Title -->
           <TextBlock Text="{Binding SelectedPullRequest.Title}"
                      FontSize="18" FontWeight="SemiBold" />

           <!-- Branch badges: source ΓåÆ target -->
           <StackPanel Orientation="Horizontal" Margin="0,8">
               <Border Background="#22342A" CornerRadius="4" Padding="6,2">
                   <TextBlock Text="{Binding SelectedPullRequest.SourceBranchName}" />
               </Border>
               <TextBlock Text="ΓåÆ" Margin="8,0" />
               <Border Background="#2D3A47" CornerRadius="4" Padding="6,2">
                   <TextBlock Text="{Binding SelectedPullRequest.TargetBranchName}" />
               </Border>
           </StackPanel>

           <!-- Author + date -->
           <!-- Status checks section -->
           <!-- Reviewers section -->
           <!-- Description (with markdown converter) -->
           <!-- File list (Expander, click to open diff) -->
           <!-- Commits (Expander) -->
           <!-- Action buttons: Checkout, Merge, Close, Open in Browser -->
       </StackPanel>
   </ScrollViewer>
   ```

2. **File List with View Toggle:**
   ```xml
   <Expander Header="Changed Files" IsExpanded="True">
       <Grid>
           <!-- Toggle: flat list vs tree -->
           <StackPanel Orientation="Horizontal">
               <ToggleButton Content="List" IsChecked="{Binding IsFileListFlat}" />
               <ToggleButton Content="Tree" IsChecked="{Binding IsFileListTree}" />
           </StackPanel>

           <!-- Flat list -->
           <ListBox ItemsSource="{Binding SelectedPrFiles}"
                    SelectionChanged="OnFileSelected"
                    Visibility="{Binding IsFileListFlat, ...}" />

           <!-- Tree view -->
           <TreeView ItemsSource="{Binding SelectedPrFilesTree}"
                     Visibility="{Binding IsFileListTree, ...}" />
       </Grid>
   </Expander>
   ```

3. **File Item Template:**
   - Status indicator (+/M/-/R/C)
   - File path (truncated with tooltip)
   - Additions/deletions counts (+10/-5)
## Business Value

- **User Impact:** Users can view complete PR information without leaving Leaf - title, description, branches, files, commits, and reviewers all in one place
- **Technical Value:** Establishes the detail panel layout pattern used throughout PR workflow; efficient lazy loading of PR data

## Inputs & Outputs

| Name | Type | Nullable | Description |
|:-----|:-----|:---------|:------------|
|  |  |  |  |

**Returns:** void - No return value

## Edge Cases & Boundary Conditions

| ID | Condition | Expected Behavior |
|:---|:----------|:------------------|
| EC-1 | PR with empty description | Show placeholder text "No description provided" |
| EC-2 | PR with 100+ changed files | Paginate file list, show count in header |
| EC-3 | Branch name with special chars | Escape properly in badge display |
| EC-4 | Very long PR title | Truncate with ellipsis, show full in tooltip |

### Functional
- [ ] Title displays prominently at top
- [ ] Branch badges show source ΓåÆ target with distinct colors
- [ ] Author avatar and name display with creation date
- [ ] Description area shows full PR body
- [ ] File list shows status indicator, path, +/- stats
- [ ] Expanders for Files and Commits sections
- [ ] Loading spinner shows during detail fetch
- [ ] Action buttons visible: Checkout, Merge, Close, Open in Browser

### Quality
- [ ] Consistent spacing and typography with Leaf style
- [ ] ScrollViewer enables viewing long descriptions
- [ ] Arrow character (ΓåÆ) displays correctly (no encoding issues)
## Dependencies

| Type | ID/Name | Notes |
|:-----|:--------|:------|
| Depends On | None | |
| Blocks | None | |

## User Stories

### US-1: View PR Details

**User Story:**
> As a developer reviewing a PR, I want to see all PR details in one place so that I can understand the change without opening a browser.

**Acceptance Criteria:**
1. Given I select a PR from the list, when details load, then I see title, author, dates, description, branches, and file count
2. Given a PR with 50+ files, when I expand the file list, then files display with virtualization (no lag)
3. Given I click the "Open in Browser" button, then the PR opens in my default browser

## Amendments

| Date | Category | Description | Rationale |
|:-----|:---------|:------------|:----------|

## Proposed Improvements

<!-- Document opportunities for refactoring, scope adjustments, or better engineering practices here. Do not implement yet; just log them. When a proposed improvement affects work above this item's level, document it in the appropriate ancestor. -->

| ID | Description | Resolution |
|:---|:------------|:-----------|
