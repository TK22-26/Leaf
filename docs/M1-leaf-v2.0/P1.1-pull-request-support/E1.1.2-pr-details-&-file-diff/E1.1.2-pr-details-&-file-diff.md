---
title: PR Details & File Diff
status: planned
owner: TBD
start_date: asap
duration: 2.5d
story_points: 13
depends_on: []
follows: []
---

# E1.1.2: PR Details & File Diff

**Current State:** PullRequestPanel displays PR list but no details when a PR is selected.

**Target State:** Full PR details view with title, branches, description, file list with diffs, reviews, and comments.

**Business Value:** Users can review complete PR information and examine file changes without leaving Leaf, significantly accelerating code review workflow.
**Modify:**
- `src/Leaf/Controls/PullRequestPanel.xaml` - Add details panel content
- `src/Leaf/ViewModels/PullRequestViewModel.cs` - Add file diff loading
- `src/Leaf/Services/GitHubPullRequestService.cs` - Add ParseUnifiedDiff

**Create:**
- `src/Leaf/Converters/MarkdownToPlainTextConverter.cs` - Strip markdown for display
## Features

| Feature | Description | Story Points | Status |
|:--------|:------------|:-------------|:-------|
| [F1.1.2.1](F1.1.2.1-pr-details-panel-ui.md) | PR Details Panel UI | 3 |  | Draft |
| [F1.1.2.2](F1.1.2.2-file-diff-integration.md) | File Diff Integration | 5 |  | Draft |
| [F1.1.2.3](F1.1.2.3-reviews-&-comments-display.md) | Reviews & Comments Display | 3 |  | Draft |
| [F1.1.2.4](F1.1.2.4-markdown-rendering.md) | Markdown Rendering | 2 |  | Draft |

1. **F1.1.2.1 PR Details Panel UI** - Depends on E1.1.1 UI structure
2. **F1.1.2.2 File Diff Integration** - Depends on details panel, uses existing DiffViewer
3. **F1.1.2.3 Reviews & Comments Display** - Parallel with F1.1.2.2
4. **F1.1.2.4 Markdown Rendering** - Parallel with F1.1.2.3
### Functional
- [ ] Selecting PR shows title, author, branches, description
- [ ] File list displays with status indicators and +/- counts
- [ ] Clicking file opens diff in DiffViewer with correct line numbers
- [ ] Reviews show reviewer name, avatar, state (approved/changes requested)
- [ ] Comments show author, date, body with markdown stripped
- [ ] Hunk headers preserved for navigation

### Quality
- [ ] Lazy load files/commits/reviews only when PR selected
- [ ] Unified diff parsed with correct line numbers
- [ ] Markdown body readable (code blocks, links handled)
## Dependencies

**Depends on:** None
**Blocks:** None

## Proposed Improvements

<!-- Document opportunities for refactoring, scope adjustments, or better engineering practices here. Do not implement yet; just log them. When a proposed improvement affects work above this item's level, document it in the appropriate ancestor. -->

| ID | Description | Resolution |
|:---|:------------|:-----------|
